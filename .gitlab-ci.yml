image: node:16

pages:
  stage: deploy
  cache:
    paths:
      - node_modules/
  script:
    - echo "Installing dependencies..."
    - cd frontend && npm install
    - echo "Building static site..."
    - cp index.html public/
    - cp app.js public/
    - cp style.css public/
    - mkdir -p public/api
    # Créer des endpoints mock pour le déploiement statique
    - echo '[]' > public/api/buffett-scores.json
    - echo '[]' > public/api/cash-flow-momentum.json
    - echo '[]' > public/api/value-trap-detector.json
    - echo '[]' > public/api/short-risk-detector.json
  artifacts:
    paths:
      - public
  only:
    - main
